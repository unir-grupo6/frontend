<header>
  <app-nav></app-nav>
</header>

<body>
  <section class="relative min-h-screen flex items-center justify-center overflow-hidden pt-16 md:pt-20">
    <div class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0">
      <figure class="cursor-pointer flex items-center mb-2 text-2xl font-semibold text-gray-900">
        <img class="w-18 h-18 " src="RutinaGO_LBlack.png" alt="logo" />
      </figure>

      <div class="w-full bg-white rounded-lg shadow border md:mt-0 sm:max-w-md xl:p-0">
        <div class="p-6 space-y-4 md:space-y-6 sm:p-8">
          <h1 class="text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl">
            Introduce tu nueva contraseña
          </h1>

          @if(toastVisible){
            <div  class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-green-500 bg-opacity-50 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-opacity duration-300"
                [ngClass]="toastType === 'error' ? 'bg-red-500' : 'bg-green-500'">
              {{ toastMessage }}
            </div>
          }

          <form class="space-y-4" novalidate [formGroup]="passwordForm" (ngSubmit)="getDataForm()">
            <div>
              <div class="relative">
                <label for="password" class="block mb-2 text-sm font-medium text-gray-900">Nueva Contraseña</label>
                <input
                  [type]="showPassword ? 'text' : 'password'"
                  name="password"
                  id="password"
                  formControlName="password"
                  class="bg-gray-50 w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary transition"
                  placeholder="****"
                  [class.border-red-500]="checkControl('password', 'required')"
                />
                <button type="button" class="absolute right-2 top-1/2 transform -translate-y-1/2" (click)="togglePasswordVisibility()">
                  <img [src]="showPassword ? 'eye-slash.svg' : 'eye.svg'" alt="toggle visibility" class="h-4 w-4 mt-7">
                </button>
              </div>
              <div class="h-4">
                @if (checkControl('password', 'required')) {
                <p class="text-red-500 text-xs">Campo obligatorio</p>
                }
                @if (checkControl('password', 'minlength')) {
                <p class="text-red-500 text-xs">La contraseña tiene que tener al menos 6 caracteres</p>
                }
                @if (checkControl('password', 'maxlength')) {
                <p class="text-red-500 text-xs">La contraseña tiene que tener menos de 16 caracteres</p>
                }
              </div>
            </div>

            <div>
              <div class="relative">
                <label for="password_repeat" class="block mb-2 text-sm font-medium text-gray-900">Repite tu Contraseña</label>
                <input
                  formControlName="password_repeat"
                  [type]="showPasswordRepeat ? 'text' : 'password'"
                  name="password_repeat"
                  id="password_repeat"
                  class="bg-gray-50 w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary transition"
                  placeholder="****"
                  [class.border-red-500]="checkControl('password_repeat', 'required')"
                />
                  <button type="button" class="absolute right-2 top-1/2 transform -translate-y-1/2" (click)="togglePasswordRepeatVisibility()">
                    <img [src]="showPasswordRepeat ? 'eye-slash.svg' : 'eye.svg'" alt="toggle visibility" class="h-4 w-4 mt-7">
                  </button>
                </div>
                <div class="h-4">
                  @if (checkControl('password_repeat', 'required')) {
                  <p class="text-red-500 text-xs">Campo obligatorio</p>
                  }
                  @if (checkControl('password_repeat', 'minlength')) {
                  <p class="text-red-500 text-xs">La contraseña tiene que tener al menos 6 caracteres</p>
                  }
                  @if (checkControl('password_repeat', 'maxlength')) {
                  <p class="text-red-500 text-xs">La contraseña tiene que tener menos de 16 caracteres</p>
                  }
                </div>
            </div>

            <button
              type="submit"
              class="cursor-pointer w-full text-white bg-primary hover:bg-secondary focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"
            >
              Confirmar contraseña
            </button>
          </form>
        </div>
      </div>
    </div>
  </section>
</body>

<footer>
  <app-footer></app-footer>
</footer>
